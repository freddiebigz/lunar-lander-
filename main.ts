namespace myTiles {
    //% blockIdentity=images._tile
    export const tile0 = img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile1 = img`
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
`
    //% blockIdentity=images._tile
    export const tile2 = img`
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
f f f f f f f f f f f f f f f f 
`
    //% blockIdentity=images._tile
    export const tile3 = img`
. . . . 3 3 3 3 3 3 3 . . . . . 
. . 3 3 8 8 8 8 8 8 8 3 3 . . . 
. 3 8 8 8 8 8 8 8 8 8 8 8 3 . . 
. 3 8 8 3 3 3 3 3 3 3 8 8 3 . . 
3 8 8 3 8 8 8 8 8 8 8 3 8 8 3 . 
3 8 8 3 8 3 3 3 3 3 8 3 8 8 3 . 
3 8 8 3 8 3 8 8 8 3 8 3 8 8 3 . 
3 8 8 3 8 3 8 3 8 3 8 3 8 8 3 . 
3 8 8 3 8 3 8 8 8 3 8 3 8 8 3 . 
3 8 8 3 8 3 3 3 3 3 8 3 8 8 3 . 
3 8 8 3 8 8 8 8 8 8 8 3 8 8 3 . 
. 3 8 8 3 3 3 3 3 3 3 8 8 3 . . 
. 3 8 8 8 8 8 8 8 8 8 8 8 3 . . 
. . 3 3 8 8 8 8 8 8 8 3 3 . . . 
. . . . 3 3 3 3 3 3 3 . . . . . 
. . . . . . . . . . . . . . . . 
`
    //% blockIdentity=images._tile
    export const tile4 = img`
9 9 9 9 1 1 1 1 1 1 1 9 . . . 9 
9 9 1 1 1 1 1 1 . . . . . 9 9 9 
9 1 9 . . . . . . . 9 . . . 9 9 
. . . . . . . . f f f 9 1 . 9 9 
. 1 9 f 9 1 1 1 1 1 9 f 9 . 1 9 
. 1 9 f 1 f f f f f 1 f 9 . . 9 
. 1 9 f 1 f 1 1 1 f 1 f 9 1 . 9 
. 1 9 f 1 f 1 . 1 f 1 f 9 1 . 9 
. 1 9 f 1 f 1 1 1 f 1 f 9 1 . 9 
. 1 9 f 1 f f f f f 1 f 9 1 . 9 
. 1 9 f 9 1 1 1 1 1 9 f 9 . . 9 
9 . 1 9 f f f f f f f 9 . . 9 9 
9 . . 1 9 9 9 9 9 9 9 1 9 . 9 9 
9 9 . . . 1 1 1 1 1 1 . . . 9 9 
9 9 9 9 . . . . . . . . 9 9 9 9 
9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 9 
`
}
controller.up.onEvent(ControllerButtonEvent.Released, function () {
    gravity = -10
    mySprite.vy = gravity
    mySprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. . . . . 2 1 9 9 9 9 1 2 . . . 
. . . . . 2 1 7 7 7 7 1 2 . . . 
. . . . . 2 1 7 7 7 7 1 2 . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. . . . . . d d 5 5 d d . . . . 
. . . . . . d d 5 5 d d . . . . 
. . . . . . 2 d d d d 2 . . . . 
. . . . . . 2 d 4 4 d 2 . . . . 
. . . . . . 2 4 4 4 4 2 . . . . 
. . . . . . 2 2 . . 2 2 . . . . 
. . . . . . 2 2 . . 2 2 . . . . 
. . . . . . . 2 . . 2 . . . . . 
`)
})
function land (multiplier: number) {
    if (mySprite.vy > 6) {
        game.over(false, effects.slash)
    } else {
        game.over(true, effects.confetti)
        info.setScore(multiplier * info.life())
    }
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.ax = gravity - THRUST
})
controller.down.onEvent(ControllerButtonEvent.Pressed, function () {
    gravity = 4
    mySprite.vy = gravity
    mySprite.setImage(img`
. . . . . 2 . . 2 . . . . . . . 
. . . . 2 2 . . 2 2 . . . . . . 
. . . . 2 2 2 2 2 2 . . . . . . 
. . . . 2 4 4 4 4 2 . . . . . . 
. . . . 2 d 4 4 d 2 . . . . . . 
. . . . 2 d d d d 2 . . . . . . 
. . . . d d 5 5 d d . . . . . . 
. . . . d d 5 5 d d . . . . . . 
. . . 2 1 1 1 1 1 1 2 . . . . . 
. . . 2 1 9 9 9 9 1 2 . . . . . 
. . . 2 1 7 7 7 7 1 2 . . . . . 
. . . 2 1 7 7 7 7 1 2 . . . . . 
. . . 2 1 1 1 1 1 1 2 . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
scene.onOverlapTile(SpriteKind.Player, sprites.builtin.brick, function (sprite, location) {
    land(1)
})
controller.left.onEvent(ControllerButtonEvent.Released, function () {
    mySprite.ax = idle
    mySprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . 2 1 1 1 1 1 1 2 . . . . . . 
. . 2 1 9 9 9 9 1 2 . d 4 2 . . 
. . 2 1 7 7 7 7 1 2 d 5 4 2 2 . 
. . 2 1 7 7 7 7 1 2 . d 4 2 . . 
. . 2 1 1 1 1 1 1 2 d 5 4 2 2 . 
. . . . . . . . . . . d 4 2 . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
controller.down.onEvent(ControllerButtonEvent.Released, function () {
    gravity = 4
    mySprite.vy = gravity
    mySprite.setImage(img`
. . . . . 2 . . 2 . . . . . . . 
. . . . 2 2 . . 2 2 . . . . . . 
. . . . 2 2 2 2 2 2 . . . . . . 
. . . . 2 4 4 4 4 2 . . . . . . 
. . . . 2 d 4 4 d 2 . . . . . . 
. . . . 2 d d d d 2 . . . . . . 
. . . . d d 5 5 d d . . . . . . 
. . . . d d 5 5 d d . . . . . . 
. . . 2 1 1 1 1 1 1 2 . . . . . 
. . . 2 1 9 9 9 9 1 2 . . . . . 
. . . 2 1 7 7 7 7 1 2 . . . . . 
. . . 2 1 7 7 7 7 1 2 . . . . . 
. . . 2 1 1 1 1 1 1 2 . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
scene.onOverlapTile(SpriteKind.Player, myTiles.tile4, function (sprite, location) {
    land(2)
})
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    mySprite.ax = THRUST
    mySprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. 2 4 d . 2 1 9 9 9 9 1 2 . . . 
2 2 4 5 d 2 1 7 7 7 7 1 2 . . . 
. 2 4 d . 2 1 7 7 7 7 1 2 . . . 
. 2 4 5 d 2 1 1 1 1 1 1 2 . . . 
2 2 4 d . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
controller.right.onEvent(ControllerButtonEvent.Released, function () {
    mySprite.ax = idle
    mySprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. 2 4 d . 2 1 9 9 9 9 1 2 . . . 
2 2 4 5 d 2 1 7 7 7 7 1 2 . . . 
. 2 4 d . 2 1 7 7 7 7 1 2 . . . 
. 2 4 5 d 2 1 1 1 1 1 1 2 . . . 
2 2 4 d . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`)
})
controller.up.onEvent(ControllerButtonEvent.Pressed, function () {
    gravity = -10
    mySprite.vy = gravity
    mySprite.setImage(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. . . . . 2 1 9 9 9 9 1 2 . . . 
. . . . . 2 1 7 7 7 7 1 2 . . . 
. . . . . 2 1 7 7 7 7 1 2 . . . 
. . . . . 2 1 1 1 1 1 1 2 . . . 
. . . . . . d d 5 5 d d . . . . 
. . . . . . d d 5 5 d d . . . . 
. . . . . . 2 d d d d 2 . . . . 
. . . . . . 2 d 4 4 d 2 . . . . 
. . . . . . 2 4 4 4 4 2 . . . . 
. . . . . . 2 2 . . 2 2 . . . . 
. . . . . . 2 2 . . 2 2 . . . . 
. . . . . . . 2 . . 2 . . . . . 
`)
})
scene.onOverlapTile(SpriteKind.Player, sprites.dungeon.greenInnerNorthWest, function (sprite, location) {
    info.setScore(400 * info.life())
    game.over(true, effects.confetti)
})
let mySprite: Sprite = null
let idle = 0
let THRUST = 0
let gravity = 0
gravity = 6
THRUST = 15
idle = 4
mySprite = sprites.create(img`
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . 2 1 1 1 1 1 1 2 . . . . . . 
. . 2 1 9 9 9 9 1 2 . . . . . . 
. . 2 1 7 7 7 7 1 2 . . . . . . 
. . 2 1 7 7 7 7 1 2 . . . . . . 
. . 2 1 1 1 1 1 1 2 . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . 
`, SpriteKind.Player)
mySprite.ay = gravity
tiles.setTilemap(tiles.createTilemap(
            hex`18001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000911000000000000000000000000000000000000000000000911000000000b00000000000000090b1109090900000000000b11110b0b0b0000000000000009111111050900000000000b111109090f0009090904090909111105050900000000000b0c09090905000909090505090e0e05050909041111110b0b090909050a00090909050e090e0e050509050505050505050a0909050c000505050505050505050e0e0e0505050e0e0e0c0f0f0f0a000a0a0a0e0e0a0e0e0e0e0e0e0e0e0e0e0e0e0a0a0f0f0a040a0a0a0a0a0a0a0a0e0e0e0e0e0e0e0e0e0e`,
            img`
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
. . . . . . . . . . . . . . . . . . . . . . . . 
`,
            [myTiles.tile0,myTiles.tile1,myTiles.tile2,sprites.builtin.crowd7,sprites.builtin.brick,sprites.dungeon.hazardLava0,sprites.vehicle.roadTurn2,sprites.dungeon.hazardLava1,myTiles.tile3,myTiles.tile4,sprites.dungeon.darkGroundNorthEast0,sprites.castle.tileGrass3,sprites.castle.tilePath7,sprites.castle.tilePath4,sprites.castle.tilePath8,sprites.builtin.crowd3,sprites.dungeon.doorClosedNorth,sprites.dungeon.greenInnerNorthWest],
            TileScale.Sixteen
        ))
scene.cameraFollowSprite(mySprite)
effects.starField.startScreenEffect()
info.setLife(750)
mySprite.setFlag(SpriteFlag.ShowPhysics, true)
game.onUpdate(function () {
    if (controller.right.isPressed() || controller.up.isPressed() || controller.down.isPressed() || controller.left.isPressed()) {
        info.changeLifeBy(-1)
    }
})
